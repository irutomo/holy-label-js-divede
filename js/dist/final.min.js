/*! HOLY LABEL Final System Bundle v1.0.0 | (c) 2024 | MIT License */
!function(e){"use strict";const InitializationManager={initialized:!1,init(){this.initialized||(this.initializeCore(),this.initializeBasicFeatures(),this.initializeAnimations(),this.initializeFeatures(),this.initializeDOMObserver(),this.initializeScrollAnimations(),this.initializeLanguageSwitcher(),this.initialized=!0)},initializeCore(){const t=e.HolyLabelDOMUtils||e.DOMUtils;t&&t.body&&t.body().classList.add("loaded")},initializeBasicFeatures(){const t=e.HolyLabelNavigationManager||e.NavigationManager,i=e.HolyLabelLogoManager||e.LogoManager;t&&(t.close(),t.init()),i&&(i.updatePosition(),i.initCategoryDisplay&&i.initCategoryDisplay(),i.controlInstagramButton&&i.controlInstagramButton()),e.initCategoryDisplay&&e.initCategoryDisplay(),e.controlInstagramButton&&e.controlInstagramButton()},initializeAnimations(){const t=e.HolyLabelAnimationManager||e.AnimationManager;t&&(t.initRelatedProducts&&t.initRelatedProducts(),t.initHomepageAnimation&&t.initHomepageAnimation())},initializeFeatures(){const t=e.HolyLabelLoadMoreManager||e.LoadMoreManager,i=e.HolyLabelProductGallery||e.ProductImageGallery,n=e.HolyLabelModalUtils;t&&t.init&&t.init(),i&&i.init&&i.init(),n&&n.init&&n.init(),e.initRestockNotificationModal&&e.initRestockNotificationModal()},initializeDOMObserver(){if(!e.MutationObserver)return;const t=e.HolyLabelLogoManager||e.LogoManager;new MutationObserver(e=>{let i=!1;e.forEach(e=>{"childList"===e.type&&(i=!0)}),i&&t&&t.updatePosition&&setTimeout(()=>t.updatePosition(),100)}).observe(document.body,{childList:!0,subtree:!0})},initializeScrollAnimations(){const t=e.HolyLabelAnimationManager||e.AnimationManager;t&&t.animateOnScroll&&setTimeout(()=>t.animateOnScroll(),500)},initializeLanguageSwitcher(){const LanguageManager=e.HolyLabelLanguageManager;LanguageManager&&LanguageManager.init?LanguageManager.init():setTimeout(()=>{e.initCustomLanguageSwitcher&&e.initCustomLanguageSwitcher()},100)},getStatus(){return{initialized:this.initialized,availableManagers:{dom:!(!e.HolyLabelDOMUtils&&!e.DOMUtils),navigation:!(!e.HolyLabelNavigationManager&&!e.NavigationManager),logo:!(!e.HolyLabelLogoManager&&!e.LogoManager),animation:!(!e.HolyLabelAnimationManager&&!e.AnimationManager),loadMore:!(!e.HolyLabelLoadMoreManager&&!e.LoadMoreManager),gallery:!(!e.HolyLabelProductGallery&&!e.ProductImageGallery),modal:!!e.HolyLabelModalUtils,language:!!e.HolyLabelLanguageManager}}}};e.HolyLabelInitializationManager=InitializationManager,e.InitializationManager||(e.InitializationManager=InitializationManager);const t=()=>{InitializationManager.init()};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",t):setTimeout(t,0)}(window),function(e){"use strict";const LanguageManager={currentLang:"ja",initialized:!1,init(){this.initialized||(setTimeout(()=>{this.hideAllBaseI18nElements(),this.setupLanguageDetection()},1e3),this.initialized=!0)},switchLanguage(t){const i=document.querySelectorAll('select[name*="language"], select[name*="i18n"]');let n=!1;if(i.forEach(e=>{if("none"===e.style.display||!e.offsetParent){e.querySelectorAll("option").forEach(i=>{if("ja"===t&&(i.value.includes("ja")||i.value.includes("JP"))||"en"===t&&(i.value.includes("en")||i.value.includes("EN"))){e.value=i.value;const t=new Event("change",{bubbles:!0});e.dispatchEvent(t),n=!0}})}}),!n){const i=e.location.href;if("en"!==t||i.includes("lang=en"))"ja"===t&&i.includes("lang=en")&&(e.location.href=i.replace(/[?&]lang=en/,""));else{const t=i.includes("?")?"&":"?";e.location.href=i+t+"lang=en"}}this.updateLanguageUIState(t),this.currentLang=t},updateLanguageUIState(e){const t=document.getElementById("lang-ja"),i=document.getElementById("lang-en");t&&i&&(t.classList.toggle("active","ja"===e),i.classList.toggle("active","en"===e))},setupLanguageDetection(){this.currentLang=this.detectCurrentLanguage(),this.updateLanguageUIState(this.currentLang)},detectCurrentLanguage(){if(e.location.href.includes("lang=en"))return"en";const t=document.querySelector('a[href*="privacy"]');return t&&t.textContent.includes("Privacy")?"en":"ja"},hideAllBaseI18nElements(){[".x_i18nSelectBox",'[id*="i18n"]','[class*="i18n"]','[id*="I18n"]','[class*="I18n"]'].forEach(e=>{document.querySelectorAll(e).forEach(e=>{e.closest(".custom-language-switcher")||(e.style.display="none",e.style.visibility="hidden")})})},toggleContentByLanguage(e){document.querySelectorAll("[data-lang]").forEach(t=>{const i=t.dataset.lang;t.style.display=i===e?"":"none"})},initLanguageSwitcherEvents(){const e=document.getElementById("lang-ja"),t=document.getElementById("lang-en");e&&e.addEventListener("click",e=>{e.preventDefault(),this.switchLanguage("ja")}),t&&t.addEventListener("click",e=>{e.preventDefault(),this.switchLanguage("en")})},getCurrentLanguage(){return this.currentLang},loadLanguageResources(e){}};e.HolyLabelLanguageManager=LanguageManager,e.LanguageManager||(e.LanguageManager=LanguageManager),e.switchLanguage=LanguageManager.switchLanguage.bind(LanguageManager),e.initCustomLanguageSwitcher=LanguageManager.init.bind(LanguageManager)}(window),function(e){"use strict";const ScrollManager={scrollTimeout:null,lastScrollY:0,isScrolling:!1,fps:60,frameDelay:1e3/60,init(){this.initScrollListener(),this.initPerformanceOptimization()},initScrollListener(){let t=!1;e.addEventListener("scroll",()=>{t||(requestAnimationFrame(()=>{this.onScroll(),t=!1}),t=!0)},{passive:!0})},onScroll(){const t=e.scrollY,i=t>this.lastScrollY?"down":"up";this.handleScrollAnimations(),this.handleLogoPosition(),this.dispatchCustomScrollEvent(i,t),this.lastScrollY=t},handleScrollAnimations(){const t=e.HolyLabelAnimationManager||e.AnimationManager;t&&t.animateOnScroll&&t.animateOnScroll()},handleLogoPosition(){const t=e.HolyLabelLogoManager||e.LogoManager;t&&t.handleScroll&&t.handleScroll()},debounceScroll(e,t=this.frameDelay){this.scrollTimeout&&clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(()=>{e(),this.scrollTimeout=null},t)},throttleScroll(e,t=this.frameDelay){this.isScrolling||(this.isScrolling=!0,setTimeout(()=>{e(),this.isScrolling=!1},t))},dispatchCustomScrollEvent(e,t){const i=new CustomEvent("holyLabelScroll",{detail:{direction:e,scrollY:t,scrollProgress:this.getScrollProgress()}});document.dispatchEvent(i)},getScrollProgress(){const t=e.scrollY,i=document.documentElement.scrollHeight-e.innerHeight;return i>0?Math.min(t/i,1):0},initPerformanceOptimization(){this.setupVisibilityObserver(),this.optimizeScrollListeners()},setupVisibilityObserver(){if(!e.IntersectionObserver)return;const t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting?e.target.classList.add("in-viewport"):e.target.classList.remove("in-viewport")})},{threshold:[0,.25,.5,.75,1],rootMargin:"50px"});document.querySelectorAll(".product-item, .hero-image, .main-visual, section").forEach(e=>t.observe(e))},optimizeScrollListeners(){const t=EventTarget.prototype.addEventListener;EventTarget.prototype.addEventListener=function(i,n,a){if("scroll"===i&&this===e){const e="object"==typeof a?{...a,passive:!0}:{passive:!0};return t.call(this,i,n,e)}return t.call(this,i,n,a)}},smoothScrollTo(t,i=1e3){const n="string"==typeof t?document.querySelector(t):t;if(!n)return;const a=e.scrollY,o=n.offsetTop-a;let l=null;const s=t=>{null===l&&(l=t);const n=t-l,r=Math.min(n/i,1),c=1-Math.pow(1-r,3);e.scrollTo(0,a+o*c),r<1&&requestAnimationFrame(s)};requestAnimationFrame(s)},getScrollInfo(){return{scrollY:e.scrollY,scrollX:e.scrollX,progress:this.getScrollProgress(),direction:this.lastScrollY<e.scrollY?"down":"up",isAtTop:0===e.scrollY,isAtBottom:e.scrollY+e.innerHeight>=document.documentElement.scrollHeight}}};e.HolyLabelScrollManager=ScrollManager,e.ScrollManager||(e.ScrollManager=ScrollManager),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>ScrollManager.init()):ScrollManager.init()}(window);