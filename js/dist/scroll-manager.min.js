/*! HOLY LABEL Scroll Manager v1.0.0 | (c) 2024 | MIT License */
/**
 * HOLY LABEL - Scroll Manager Library
 * Optimized scroll event handling and performance management
 * @version 1.0.0
 * @namespace window.HolyLabelScrollManager
 */
!function(t){"use strict";const e={scrollTimeout:null,lastScrollY:0,isScrolling:!1,fps:60,frameDelay:1e3/60,init(){this.initScrollListener(),this.initPerformanceOptimization()},initScrollListener(){let e=!1;t.addEventListener("scroll",()=>{e||(requestAnimationFrame(()=>{this.onScroll(),e=!1}),e=!0)},{passive:!0})},onScroll(){const e=t.scrollY,o=e>this.lastScrollY?"down":"up";this.handleScrollAnimations(),this.handleLogoPosition(),this.dispatchCustomScrollEvent(o,e),this.lastScrollY=e},handleScrollAnimations(){const e=t.HolyLabelAnimationManager||t.AnimationManager;e&&e.animateOnScroll&&e.animateOnScroll()},handleLogoPosition(){const e=t.HolyLabelLogoManager||t.LogoManager;e&&e.handleScroll&&e.handleScroll()},debounceScroll(t,e=this.frameDelay){this.scrollTimeout&&clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(()=>{t(),this.scrollTimeout=null},e)},throttleScroll(t,e=this.frameDelay){this.isScrolling||(this.isScrolling=!0,setTimeout(()=>{t(),this.isScrolling=!1},e))},dispatchCustomScrollEvent(t,e){const o=new CustomEvent("holyLabelScroll",{detail:{direction:t,scrollY:e,scrollProgress:this.getScrollProgress()}});document.dispatchEvent(o)},getScrollProgress(){const e=t.scrollY,o=document.documentElement.scrollHeight-t.innerHeight;return o>0?Math.min(e/o,1):0},initPerformanceOptimization(){this.setupVisibilityObserver(),this.optimizeScrollListeners()},setupVisibilityObserver(){if(!t.IntersectionObserver)return;const e=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting?t.target.classList.add("in-viewport"):t.target.classList.remove("in-viewport")})},{threshold:[0,.25,.5,.75,1],rootMargin:"50px"});document.querySelectorAll(".product-item, .hero-image, .main-visual, section").forEach(t=>e.observe(t))},optimizeScrollListeners(){const e=EventTarget.prototype.addEventListener;EventTarget.prototype.addEventListener=function(o,l,i){if("scroll"===o&&this===t){const t="object"==typeof i?{...i,passive:!0}:{passive:!0};return e.call(this,o,l,t)}return e.call(this,o,l,i)}},smoothScrollTo(e,o=1e3){const l="string"==typeof e?document.querySelector(e):e;if(!l)return;const i=t.scrollY,r=l.offsetTop-i;let s=null;const n=e=>{null===s&&(s=e);const l=e-s,c=Math.min(l/o,1),a=1-Math.pow(1-c,3);t.scrollTo(0,i+r*a),c<1&&requestAnimationFrame(n)};requestAnimationFrame(n)},getScrollInfo(){return{scrollY:t.scrollY,scrollX:t.scrollX,progress:this.getScrollProgress(),direction:this.lastScrollY<t.scrollY?"down":"up",isAtTop:0===t.scrollY,isAtBottom:t.scrollY+t.innerHeight>=document.documentElement.scrollHeight}}};t.HolyLabelScrollManager=e,t.ScrollManager||(t.ScrollManager=e),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>e.init()):e.init()}(window);