/*! HOLY LABEL Language Manager v1.0.0 | (c) 2024 | MIT License */
/**
 * HOLY LABEL - Language Manager Library
 * Multi-language support and language switching functionality
 * @version 1.0.0
 * @namespace window.HolyLabelLanguageManager
 */
!function(e){"use strict";const n={currentLang:"ja",initialized:!1,init(){this.initialized||(setTimeout(()=>{this.hideAllBaseI18nElements(),this.setupLanguageDetection()},1e3),this.initialized=!0)},switchLanguage(n){const t=document.querySelectorAll('select[name*="language"], select[name*="i18n"]');let a=!1;if(t.forEach(e=>{if("none"===e.style.display||!e.offsetParent){e.querySelectorAll("option").forEach(t=>{if("ja"===n&&(t.value.includes("ja")||t.value.includes("JP"))||"en"===n&&(t.value.includes("en")||t.value.includes("EN"))){e.value=t.value;const n=new Event("change",{bubbles:!0});e.dispatchEvent(n),a=!0}})}}),!a){const t=e.location.href;if("en"!==n||t.includes("lang=en"))"ja"===n&&t.includes("lang=en")&&(e.location.href=t.replace(/[?&]lang=en/,""));else{const n=t.includes("?")?"&":"?";e.location.href=t+n+"lang=en"}}this.updateLanguageUIState(n),this.currentLang=n},updateLanguageUIState(e){const n=document.getElementById("lang-ja"),t=document.getElementById("lang-en");n&&t&&(n.classList.toggle("active","ja"===e),t.classList.toggle("active","en"===e))},setupLanguageDetection(){this.currentLang=this.detectCurrentLanguage(),this.updateLanguageUIState(this.currentLang)},detectCurrentLanguage(){if(e.location.href.includes("lang=en"))return"en";const n=document.querySelector('a[href*="privacy"]');return n&&n.textContent.includes("Privacy")?"en":"ja"},hideAllBaseI18nElements(){[".x_i18nSelectBox",'[id*="i18n"]','[class*="i18n"]','[id*="I18n"]','[class*="I18n"]'].forEach(e=>{document.querySelectorAll(e).forEach(e=>{e.closest(".custom-language-switcher")||(e.style.display="none",e.style.visibility="hidden")})})},toggleContentByLanguage(e){document.querySelectorAll("[data-lang]").forEach(n=>{const t=n.dataset.lang;n.style.display=t===e?"":"none"})},initLanguageSwitcherEvents(){const e=document.getElementById("lang-ja"),n=document.getElementById("lang-en");e&&e.addEventListener("click",e=>{e.preventDefault(),this.switchLanguage("ja")}),n&&n.addEventListener("click",e=>{e.preventDefault(),this.switchLanguage("en")})},getCurrentLanguage(){return this.currentLang},loadLanguageResources(e){}};e.HolyLabelLanguageManager=n,e.LanguageManager||(e.LanguageManager=n),e.switchLanguage=n.switchLanguage.bind(n),e.initCustomLanguageSwitcher=n.init.bind(n)}(window);