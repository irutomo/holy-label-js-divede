/*! HOLY LABEL Animation Manager v1.0.0 | (c) 2024 | MIT License */
/**
 * HOLY LABEL - Animation Manager Library
 * Advanced animation and intersection observer management
 * @version 1.0.0
 * @namespace window.HolyLabelAnimationManager
 * @requires window.HolyLabelDOMUtils, window.HolyLabelAnimationConfig
 */
!function(t){"use strict";const e={observers:new Map,createObserver:(t,e={})=>new IntersectionObserver(t,{threshold:.1,rootMargin:"50px",...e}),initRelatedProducts(){const DOMUtils=t.HolyLabelDOMUtils||t.DOMUtils,AnimationConfig=t.HolyLabelAnimationConfig||t.AnimationConfig,e=DOMUtils.getAll(".related-product-item");if(0===e.length)return;const i=this.createObserver(t=>{t.forEach(t=>{t.isIntersecting&&(t.target.style.opacity="1",t.target.style.transform="translateY(0)",i.unobserve(t.target))})});e.forEach((t,e)=>{Object.assign(t.style,{opacity:"0",transform:"translateY(30px)",transition:`opacity ${AnimationConfig.TRANSITION_DURATION} ease ${e*AnimationConfig.STAGGER_DELAY}s, transform ${AnimationConfig.TRANSITION_DURATION} ease ${e*AnimationConfig.STAGGER_DELAY}s`}),i.observe(t)}),this.observers.set("relatedProducts",i)},animateOnScroll(){const DOMUtils=t.HolyLabelDOMUtils||t.DOMUtils,AnimationConfig=t.HolyLabelAnimationConfig||t.AnimationConfig;DOMUtils.getAll(".product-item:not(.scroll-animated)").forEach(e=>{const i=e.getBoundingClientRect();i.top<t.innerHeight-AnimationConfig.SCROLL_THRESHOLD&&i.bottom>0&&e.classList.add("scroll-animated")})},initHomepageAnimation(){const DOMUtils=t.HolyLabelDOMUtils||t.DOMUtils,PageState=t.HolyLabelPageState||t.PageState,AnimationConfig=t.HolyLabelAnimationConfig||t.AnimationConfig;if(!PageState.isHomePage())return;const e=DOMUtils.get(".hero-image");e&&setTimeout(()=>e.classList.add("fade-in"),AnimationConfig.FADE_DELAY)},initProductItems(){const DOMUtils=t.HolyLabelDOMUtils||t.DOMUtils,AnimationConfig=t.HolyLabelAnimationConfig||t.AnimationConfig,e=DOMUtils.getAll(".product-item");if(0===e.length)return;const i=this.createObserver(t=>{t.forEach(t=>{t.isIntersecting&&(t.target.classList.add("fade-in-up"),i.unobserve(t.target))})});e.forEach((t,e)=>{t.style.animationDelay=e*AnimationConfig.STAGGER_DELAY+"s",i.observe(t)}),this.observers.set("productItems",i)},init(){this.initHomepageAnimation(),this.initRelatedProducts(),this.initProductItems(),t.addEventListener("scroll",this.throttle(()=>{this.animateOnScroll()},100))},throttle(t,e){let i,n;return function(){const o=this,a=arguments;n?(clearTimeout(i),i=setTimeout(function(){Date.now()-n>=e&&(t.apply(o,a),n=Date.now())},e-(Date.now()-n))):(t.apply(o,a),n=Date.now())}},destroy(){this.observers.forEach(t=>t.disconnect()),this.observers.clear()}};t.HolyLabelAnimationManager=e,t.AnimationManager||(t.AnimationManager=e)}(window);