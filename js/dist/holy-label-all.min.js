/*! 
 * HOLY LABEL JavaScript - All-in-One Source File
 * BASE専用ECテーマの統合JavaScriptライブラリ
 * Version: 2.0.0
 * Description: 12個のJavaScriptソースファイルを統合し、開発効率を劇的向上
 * Repository: https://github.com/irutomo/holy-label-js-divede
 * License: MIT
 * Build Date: 2024-07-01
 * 
 * Consolidated from:
 * - dom-utils.js (DOM操作基盤)
 * - page-state.js (ページ状態管理)
 * - animation-config.js (アニメーション設定)
 * - animation-manager.js (アニメーション管理)
 * - navigation-manager.js (ナビゲーション管理)
 * - modal-utils.js (モーダル機能)
 * - product-gallery.js (商品ギャラリー)
 * - loadmore-manager.js (Ajax読み込み)
 * - logo-manager.js (ロゴ管理)
 * - initialization-manager.js (初期化管理)
 * - language-manager.js (多言語管理)
 * - scroll-manager.js (スクロール管理)
 * 
 * Global Variables Preserved:
 * - window.HolyLabelDOMUtils, window.HolyLabelPageState
 * - window.HolyLabelAnimationConfig, window.HolyLabelAnimationManager
 * - window.HolyLabelNavigationManager, window.HolyLabelModalUtils
 * - window.HolyLabelProductGallery, window.HolyLabelLoadMoreManager
 * - window.HolyLabelLogoManager, window.HolyLabelInitializationManager
 * - window.HolyLabelLanguageManager, window.HolyLabelScrollManager
 */
/**
 * HOLY LABEL - DOM Utilities Library
 * Core DOM manipulation and caching functionality
 * @version 1.0.0
 * @namespace window.HolyLabelDOMUtils
 */
!function(t){"use strict";const e={get:t=>document.querySelector(t),getAll:t=>document.querySelectorAll(t),getId:t=>document.getElementById(t),cache:{},getCached:function(t,e){return this.cache[t]||(this.cache[t]=this.get(e)),this.cache[t]},hamburger:()=>e.getCached("hamburger","#js-humberger"),navArea:()=>e.getCached("navArea",".js-nav-area"),logo:()=>e.getCached("logo",".logo"),body:()=>document.body,clearCache:function(){this.cache={}},exists:function(t){return null!==this.get(t)},addClass:function(t,e){t&&e&&t.classList.add(e)},removeClass:function(t,e){t&&e&&t.classList.remove(e)},toggleClass:function(t,e){t&&e&&t.classList.toggle(e)}};t.HolyLabelDOMUtils=e,t.DOMUtils||(t.DOMUtils=e)}(window),
/**
 * HOLY LABEL - Page State Management Library
 * Page type detection and state management
 * @version 1.0.0
 * @namespace window.HolyLabelPageState
 * @requires window.HolyLabelDOMUtils
 */
function(t){"use strict";const e={cache:null,get(){if(!this.cache){const e=t.HolyLabelDOMUtils||t.DOMUtils;this.cache={hasMainVisual:null!==e.get(".main-visual"),hasProductDetail:null!==e.get(".product-detail"),hasAboutSection:null!==e.get(".about-section"),hasCategoryHeader:null!==e.get(".category-header"),hasSearchHeader:null!==e.get(".search-header"),hasProductSection:null!==e.get(".product-section"),isShopTopPage:"shopTopPage"===document.body.id,isShopDetailPage:"shopDetailPage"===document.body.id,isAboutPage:"aboutPage"===document.body.id,isContactPage:"contactPage"===document.body.id,isBlogPage:"blogPage"===document.body.id}}return this.cache},isHomePage(){const t=this.get();return t.isShopTopPage&&t.hasMainVisual&&!t.hasProductDetail&&!t.hasAboutSection&&!t.hasCategoryHeader&&!t.hasSearchHeader&&!t.hasProductSection},isShopDetailPage(){const t=this.get();return t.isShopDetailPage||t.hasProductDetail},hasMainVisual(){return this.get().hasMainVisual},hasProductDetail(){return this.get().hasProductDetail},getPageType(){const t=this.get();return this.isHomePage()?"home":t.isShopDetailPage?"product":t.isAboutPage?"about":t.isContactPage?"contact":t.isBlogPage?"blog":"unknown"},clearCache(){this.cache=null},refresh(){return this.clearCache(),this.get()}};t.HolyLabelPageState=e,t.PageState||(t.PageState=e)}(window),
/**
 * HOLY LABEL - Animation Configuration Library
 * Animation timing and configuration management
 * @version 1.0.0
 * @namespace window.HolyLabelAnimationConfig
 */
function(t){"use strict";const e={FADE_DELAY:2e3,STAGGER_DELAY:.1,SCROLL_THRESHOLD:100,TRANSITION_DURATION:"0.8s",isMobile:()=>t.innerWidth<=768,isTablet:()=>t.innerWidth>768&&t.innerWidth<=1024,isDesktop:()=>t.innerWidth>1024,getResponsiveConfig(){return this.isMobile()?{staggerDelay:.08,fadeDelay:1500,transitionDuration:"0.6s",scrollThreshold:50}:this.isTablet()?{staggerDelay:.09,fadeDelay:1800,transitionDuration:"0.7s",scrollThreshold:75}:{staggerDelay:this.STAGGER_DELAY,fadeDelay:this.FADE_DELAY,transitionDuration:this.TRANSITION_DURATION,scrollThreshold:this.SCROLL_THRESHOLD}},applyCSSVariables(){const t=this.getResponsiveConfig(),e=document.documentElement;e.style.setProperty("--animation-duration",t.transitionDuration),e.style.setProperty("--stagger-delay",`${t.staggerDelay}s`),e.style.setProperty("--fade-delay",`${t.fadeDelay}ms`)},easing:{easeOutCubic:"cubic-bezier(0.33, 1, 0.68, 1)",easeInOutCubic:"cubic-bezier(0.65, 0, 0.35, 1)",easeOutQuart:"cubic-bezier(0.25, 1, 0.5, 1)",bounce:"cubic-bezier(0.68, -0.55, 0.265, 1.55)"},init(){let e;this.applyCSSVariables(),t.addEventListener("resize",()=>{clearTimeout(e),e=setTimeout(()=>{this.applyCSSVariables()},250)})}};t.HolyLabelAnimationConfig=e,t.AnimationConfig||(t.AnimationConfig=e)}(window),
/**
 * HOLY LABEL - Animation Manager Library
 * Advanced animation and intersection observer management
 * @version 1.0.0
 * @namespace window.HolyLabelAnimationManager
 * @requires window.HolyLabelDOMUtils, window.HolyLabelAnimationConfig
 */
function(t){"use strict";const e={observers:new Map,createObserver:(t,e={})=>new IntersectionObserver(t,{threshold:.1,rootMargin:"50px",...e}),initRelatedProducts(){const e=t.HolyLabelDOMUtils||t.DOMUtils,n=t.HolyLabelAnimationConfig||t.AnimationConfig,i=e.getAll(".related-product-item");if(0===i.length)return;const o=this.createObserver(t=>{t.forEach(t=>{t.isIntersecting&&(t.target.style.opacity="1",t.target.style.transform="translateY(0)",o.unobserve(t.target))})});i.forEach((t,e)=>{Object.assign(t.style,{opacity:"0",transform:"translateY(30px)",transition:`opacity ${n.TRANSITION_DURATION} ease ${e*n.STAGGER_DELAY}s, transform ${n.TRANSITION_DURATION} ease ${e*n.STAGGER_DELAY}s`}),o.observe(t)}),this.observers.set("relatedProducts",o)},animateOnScroll(){const e=t.HolyLabelDOMUtils||t.DOMUtils,n=t.HolyLabelAnimationConfig||t.AnimationConfig;e.getAll(".product-item:not(.scroll-animated)").forEach(e=>{const i=e.getBoundingClientRect();i.top<t.innerHeight-n.SCROLL_THRESHOLD&&i.bottom>0&&e.classList.add("scroll-animated")})},initHomepageAnimation(){const e=t.HolyLabelDOMUtils||t.DOMUtils,n=t.HolyLabelPageState||t.PageState,i=t.HolyLabelAnimationConfig||t.AnimationConfig;if(!n.isHomePage())return;const o=e.get(".hero-image");o&&setTimeout(()=>o.classList.add("fade-in"),i.FADE_DELAY)},initProductItems(){const e=t.HolyLabelDOMUtils||t.DOMUtils,n=t.HolyLabelAnimationConfig||t.AnimationConfig,i=e.getAll(".product-item");if(0===i.length)return;const o=this.createObserver(t=>{t.forEach(t=>{t.isIntersecting&&(t.target.classList.add("fade-in-up"),o.unobserve(t.target))})});i.forEach((t,e)=>{t.style.animationDelay=e*n.STAGGER_DELAY+"s",o.observe(t)}),this.observers.set("productItems",o)},init(){this.initHomepageAnimation(),this.initRelatedProducts(),this.initProductItems(),t.addEventListener("scroll",this.throttle(()=>{this.animateOnScroll()},100))},throttle(t,e){let n,i;return function(){const o=this,a=arguments;i?(clearTimeout(n),n=setTimeout(function(){Date.now()-i>=e&&(t.apply(o,a),i=Date.now())},e-(Date.now()-i))):(t.apply(o,a),i=Date.now())}},destroy(){this.observers.forEach(t=>t.disconnect()),this.observers.clear()}};t.HolyLabelAnimationManager=e,t.AnimationManager||(t.AnimationManager=e)}(window),
/**
 * HOLY LABEL - Navigation Manager Library
 * Mobile navigation and menu controls
 * @version 1.0.0
 * @namespace window.HolyLabelNavigationManager
 * @requires window.HolyLabelDOMUtils
 */
function(t){"use strict";const e={elements:{get hamburger(){return(t.HolyLabelDOMUtils||t.DOMUtils).hamburger()},get navArea(){return(t.HolyLabelDOMUtils||t.DOMUtils).navArea()},get body(){return(t.HolyLabelDOMUtils||t.DOMUtils).body()}},isActive(){return this.elements.hamburger?.classList.contains("-active")||!1},toggle(){const{hamburger:e,navArea:n,body:i}=this.elements;if(!e||!n)return;const o=this.isActive(),a=o?"remove":"add";[e,n].forEach(t=>t.classList[a]("-active")),i.classList[a]("body-fixed"),e.setAttribute("aria-expanded",!o),setTimeout(()=>{const e=t.HolyLabelLogoManager||t.LogoManager;e&&"function"==typeof e.updatePosition&&e.updatePosition()},10)},close(){const{hamburger:e,navArea:n,body:i}=this.elements;e&&n&&([e,n].forEach(t=>t.classList.remove("-active")),i.classList.remove("body-fixed"),e.setAttribute("aria-expanded","false"),setTimeout(()=>{const e=t.HolyLabelLogoManager||t.LogoManager;e&&"function"==typeof e.updatePosition&&e.updatePosition()},10))},open(){const{hamburger:e,navArea:n,body:i}=this.elements;e&&n&&([e,n].forEach(t=>t.classList.add("-active")),i.classList.add("body-fixed"),e.setAttribute("aria-expanded","true"),setTimeout(()=>{const e=t.HolyLabelLogoManager||t.LogoManager;e&&"function"==typeof e.updatePosition&&e.updatePosition()},10))},initSubMenus(){(t.HolyLabelDOMUtils||t.DOMUtils).getAll("a.expand").forEach(t=>{t.addEventListener("click",e=>{e.preventDefault();const n=t.nextElementSibling;if(n&&n.classList.contains("ex-list")){const e=t.classList.contains("open");t.classList.toggle("open",!e),n.style.display=e?"none":"block"}})})},initEventListeners(){const{hamburger:e,navArea:n}=this.elements;e&&e.addEventListener("click",()=>this.toggle()),document.addEventListener("click",t=>{!this.isActive()||n?.contains(t.target)||e?.contains(t.target)||this.close()}),document.addEventListener("keydown",t=>{"Escape"===t.key&&this.isActive()&&this.close()}),t.addEventListener("resize",()=>{t.innerWidth>768&&this.isActive()&&this.close()})},initLanguageSwitcher(){const e=t.HolyLabelDOMUtils||t.DOMUtils;t.switchLanguage=t=>{const n=e.getId("lang-ja"),i=e.getId("lang-en");n&&i&&("ja"===t?(n.classList.add("active"),i.classList.remove("active")):"en"===t&&(i.classList.add("active"),n.classList.remove("active"))),console.log(`Language switched to: ${t}`)}},init(){this.initEventListeners(),this.initSubMenus(),this.initLanguageSwitcher(),this.close()}};t.HolyLabelNavigationManager=e,t.NavigationManager||(t.NavigationManager=e)}(window),
/**
 * HOLY LABEL - Modal Utilities Library
 * Modal styling and initialization utilities
 * @version 1.0.0
 * @namespace window.HolyLabelModalUtils
 */
function(t){"use strict";const e={initRestockNotificationModal(){const t=document.createElement("style");t.textContent='\n                .base-restock-modal {\n                    background-color: var(--primary-bg) !important;\n                    color: var(--primary-text) !important;\n                    border: 1px solid var(--border-color) !important;\n                }\n                .base-restock-modal .modal-header {\n                    border-bottom: 1px solid var(--border-color) !important;\n                    color: var(--primary-text) !important;\n                }\n                .base-restock-modal .modal-title {\n                    color: var(--primary-text) !important;\n                    font-weight: var(--weight-normal) !important;\n                    letter-spacing: 1px !important;\n                }\n                .base-restock-modal .modal-body {\n                    color: var(--secondary-text) !important;\n                    font-weight: var(--weight-light) !important;\n                }\n                .base-restock-modal input[type="email"] {\n                    background-color: var(--primary-bg) !important;\n                    color: var(--primary-text) !important;\n                    border: 1px solid var(--border-color) !important;\n                    font-weight: var(--weight-light) !important;\n                }\n                .base-restock-modal input[type="email"]:focus {\n                    border-color: var(--accent-color) !important;\n                    box-shadow: 0 0 0 1px var(--accent-color) !important;\n                }\n                .base-restock-modal .btn-primary {\n                    background-color: var(--accent-color) !important;\n                    border-color: var(--accent-color) !important;\n                    color: var(--primary-text) !important;\n                    font-weight: var(--weight-normal) !important;\n                    letter-spacing: 1px !important;\n                }\n                .base-restock-modal .btn-primary:hover {\n                    background-color: rgba(212, 56, 131, 0.8) !important;\n                    border-color: rgba(212, 56, 131, 0.8) !important;\n                }\n                .base-restock-modal .btn-close {\n                    color: var(--secondary-text) !important;\n                }\n                .base-restock-modal .btn-close:hover {\n                    color: var(--primary-text) !important;\n                }\n            ',document.head.appendChild(t)},createModal(t={}){const{title:e="",content:n="",className:i="",showClose:o=!0,backdrop:a=!0}=t,s=document.createElement("div");if(s.className=`modal fade ${i}`,s.setAttribute("tabindex","-1"),s.setAttribute("role","dialog"),s.innerHTML=`\n                <div class="modal-dialog" role="document">\n                    <div class="modal-content">\n                        ${e?`\n                            <div class="modal-header">\n                                <h5 class="modal-title">${e}</h5>\n                                ${o?'<button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"></button>':""}\n                            </div>\n                        `:""}\n                        <div class="modal-body">\n                            ${n}\n                        </div>\n                    </div>\n                </div>\n            `,a&&s.addEventListener("click",t=>{t.target===s&&this.closeModal(s)}),o){const t=s.querySelector(".btn-close");t&&t.addEventListener("click",()=>this.closeModal(s))}return s},openModal(t){document.body.appendChild(t),t.style.display="block",setTimeout(()=>t.classList.add("show"),10),document.body.classList.add("modal-open")},closeModal(t){t.classList.remove("show"),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),document.body.classList.remove("modal-open")},300)},confirm(t,e){const n=this.createModal({title:"Confirmation",content:`\n                    <p>${t}</p>\n                    <div class="modal-actions">\n                        <button type="button" class="btn btn-secondary cancel-btn">Cancel</button>\n                        <button type="button" class="btn btn-primary confirm-btn">OK</button>\n                    </div>\n                `}),i=n.querySelector(".cancel-btn"),o=n.querySelector(".confirm-btn");i.addEventListener("click",()=>{this.closeModal(n),e&&e(!1)}),o.addEventListener("click",()=>{this.closeModal(n),e&&e(!0)}),this.openModal(n)},alert(t,e){const n=this.createModal({title:"Notice",content:`\n                    <p>${t}</p>\n                    <div class="modal-actions">\n                        <button type="button" class="btn btn-primary ok-btn">OK</button>\n                    </div>\n                `});n.querySelector(".ok-btn").addEventListener("click",()=>{this.closeModal(n),e&&e()}),this.openModal(n)},init(){this.initRestockNotificationModal(),document.addEventListener("keydown",t=>{if("Escape"===t.key){const t=document.querySelector(".modal.show");t&&this.closeModal(t)}})}};t.HolyLabelModalUtils=e,t.initRestockNotificationModal=e.initRestockNotificationModal}(window),
/**
 * HOLY LABEL - Product Image Gallery Library
 * Advanced product image gallery with carousel and zoom functionality
 * @version 1.0.0
 * @namespace window.HolyLabelProductGallery
 * @requires window.HolyLabelDOMUtils
 */
function(t){"use strict";const e={currentIndex:0,images:[],isScrolling:!1,elements:{mainContainer:null,thumbnailContainer:null,counter:null},init(){console.log("HolyLabelProductGallery.init() called"),this.elements.mainContainer=document.getElementById("mainImageContainer"),this.elements.thumbnailContainer=document.getElementById("thumbnailContainer"),this.elements.counter=document.getElementById("imageCounter"),console.log("Found elements:",{mainContainer:!!this.elements.mainContainer,thumbnailContainer:!!this.elements.thumbnailContainer,counter:!!this.elements.counter}),this.collectImages(),console.log("Collected images:",this.images.length),0!==this.images.length?(this.createDesktopImage(),this.elements.mainContainer&&this.elements.thumbnailContainer&&(this.renderImages(),this.addEventListeners(),this.updateUI(),console.log("Mobile gallery system initialized")),console.log("ProductGallery initialization completed")):console.log("No images found, exiting")},createDesktopImage(){const t=document.querySelector(".product-detail-image");if(!t||0===this.images.length)return;const e=t.querySelector(".desktop-main-image");e&&e.remove();const n=document.createElement("img");n.src=this.images[0].main,n.alt=document.querySelector(".product-detail-title")?.textContent||"商品画像",n.className="desktop-main-image",t.appendChild(n),console.log("Desktop image created:",this.images[0].main)},collectImages(){const t=document.getElementById("imageData");if(!t)return;const e=t.querySelectorAll("span[data-main]");this.images=Array.from(e).map(t=>({main:t.getAttribute("data-main"),thumb:t.getAttribute("data-thumb")})).filter(t=>t.main&&t.thumb)},renderImages(){let t="",e="";const n=document.querySelector(".product-detail-title")?.textContent||"商品画像";this.images.forEach((i,o)=>{t+=`<div class="main-image-item"><img src="${i.main}" alt="${n} ${o+1}"></div>`,e+=`<div class="thumbnail-item" data-index="${o}"><img src="${i.thumb}" alt="${n} サムネイル ${o+1}"></div>`}),this.elements.mainContainer.innerHTML=t,this.elements.thumbnailContainer.innerHTML=e},addEventListeners(){let t;this.elements.mainContainer.addEventListener("scroll",()=>{this.isScrolling||(t&&clearTimeout(t),t=setTimeout(()=>{const t=this.elements.mainContainer.offsetWidth,e=this.elements.mainContainer.scrollLeft,n=Math.round(e/t),i=Math.max(0,Math.min(n,this.images.length-1));i!==this.currentIndex&&(this.currentIndex=i,this.updateUI())},100))}),this.elements.thumbnailContainer.addEventListener("click",t=>{const e=t.target.closest(".thumbnail-item");if(e){const t=parseInt(e.dataset.index,10);this.scrollToImage(t)}});const e=document.getElementById("prevBtn"),n=document.getElementById("nextBtn");e&&n&&(e.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),this.scrollToImage(this.currentIndex-1)}),n.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),this.scrollToImage(this.currentIndex+1)}));const i=document.getElementById("zoomBtn");i&&i.addEventListener("click",()=>this.openZoomModal()),document.addEventListener("keydown",t=>{document.querySelector(".product-detail")&&("ArrowLeft"===t.key?(t.preventDefault(),this.scrollToImage(this.currentIndex-1)):"ArrowRight"===t.key&&(t.preventDefault(),this.scrollToImage(this.currentIndex+1)))})},scrollToImage(t){if(0===this.images.length||this.isScrolling)return;let e=t;if(e<0?e=this.images.length-1:e>=this.images.length&&(e=0),e===this.currentIndex)return;this.isScrolling=!0,this.currentIndex=e;const n=e*this.elements.mainContainer.offsetWidth;this.elements.mainContainer.scrollTo({left:n,behavior:"smooth"}),this.updateUI(),setTimeout(()=>{this.isScrolling=!1},500)},openZoomModal(){if(0===this.images.length)return;const t=document.createElement("div");t.className="zoom-modal",t.innerHTML=`\n                <div class="zoom-modal-content">\n                    <button class="zoom-close">&times;</button>\n                    <img src="${this.images[this.currentIndex].main}" alt="商品画像拡大">\n                    <div class="zoom-counter">${this.currentIndex+1}/${this.images.length}</div>\n                    ${this.images.length>1?'\n                        <button class="zoom-prev">‹</button>\n                        <button class="zoom-next">›</button>\n                    ':""}\n                </div>\n            `,document.body.appendChild(t),document.body.style.overflow="hidden";const e=t.querySelector(".zoom-close"),n=t.querySelector(".zoom-prev"),i=t.querySelector(".zoom-next"),o=t.querySelector("img"),a=t.querySelector(".zoom-counter");let s=this.currentIndex;const l=()=>{o.src=this.images[s].main,a.textContent=`${s+1}/${this.images.length}`};e.addEventListener("click",()=>{document.body.removeChild(t),document.body.style.overflow=""}),n&&i&&(n.addEventListener("click",()=>{s=s>0?s-1:this.images.length-1,l()}),i.addEventListener("click",()=>{s=s<this.images.length-1?s+1:0,l()}));const r=t=>{"Escape"===t.key&&(e.click(),document.removeEventListener("keydown",r))};document.addEventListener("keydown",r),t.addEventListener("click",n=>{n.target===t&&e.click()})},updateUI(){this.elements.counter&&(this.images.length>1?(this.elements.counter.textContent=`${this.currentIndex+1}/${this.images.length}`,this.elements.counter.style.display="block"):this.elements.counter.style.display="none");const t=document.getElementById("prevBtn"),e=document.getElementById("nextBtn");t&&e&&(this.images.length>1?(t.style.display="flex",e.style.display="flex"):(t.style.display="none",e.style.display="none"));const n=this.elements.thumbnailContainer.querySelectorAll(".thumbnail-item");n.forEach((t,e)=>{t.classList.toggle("active",e===this.currentIndex)});const i=n[this.currentIndex];if(i){const t=this.elements.thumbnailContainer,e=i.offsetLeft-t.offsetWidth/2+i.offsetWidth/2;t.scrollTo({left:e,behavior:"smooth"})}},handleResize(){if(0===this.images.length)return;const t=this.currentIndex*this.elements.mainContainer.offsetWidth;this.elements.mainContainer.scrollLeft=t},destroy(){this.elements={mainContainer:null,thumbnailContainer:null,counter:null},this.images=[],this.currentIndex=0}};t.HolyLabelProductGallery=e,t.ProductImageGallery||(t.ProductImageGallery=e),t.addEventListener("resize",()=>{e.elements.mainContainer&&e.handleResize()})}(window),
/**
 * HOLY LABEL - Load More Manager Library
 * Ajax pagination and load more functionality
 * @version 1.0.0
 * @namespace window.HolyLabelLoadMoreManager
 * @requires window.HolyLabelDOMUtils
 */
function(t){"use strict";const e={elements:{get btn(){return(t.HolyLabelDOMUtils||t.DOMUtils).getId("load-more-btn")},get maxPage(){return(t.HolyLabelDOMUtils||t.DOMUtils).getId("max_page")},get nextPage(){return(t.HolyLabelDOMUtils||t.DOMUtils).getId("next_page")},get productGrid(){return(t.HolyLabelDOMUtils||t.DOMUtils).getId("product-grid")}},loading:!1,init(){const{btn:t}=this.elements;t&&(this.updateButtonVisibility(),t.addEventListener("click",()=>this.loadMore()),this.initInfiniteScroll())},updateButtonVisibility(){const{btn:t,maxPage:e,nextPage:n}=this.elements;if(!t||!e||!n)return;const i=parseInt(n.textContent||"1",10)-1,o=parseInt(e.textContent||"1",10);t.style.display=i>=o?"none":"block"},async loadMore(){if(this.loading)return;const{btn:t,nextPage:e,productGrid:n}=this.elements;if(!t||!e||!n)return;this.loading=!0;const i=parseInt(e.textContent||"1",10);this.setLoadingState(!0);try{const t=await this.fetchMoreItems(i);t.success&&t.items?(this.appendItems(t.items),e.textContent=i+1,this.updateButtonVisibility(),this.animateNewItems()):this.showError("商品の読み込みに失敗しました。")}catch(t){console.error("Load more error:",t),this.showError("ネットワークエラーが発生しました。")}finally{this.loading=!1,this.setLoadingState(!1)}},async fetchMoreItems(e){const n=new URL(t.location.href);n.searchParams.set("page",e);const i=await fetch(n.toString(),{headers:{"X-Requested-With":"XMLHttpRequest"}});if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const o=await i.text();return this.parseResponse(o)},parseResponse(t){const e=(new DOMParser).parseFromString(t,"text/html").querySelectorAll(".product-item");return{success:e.length>0,items:Array.from(e).map(t=>t.outerHTML)}},appendItems(t){const{productGrid:e}=this.elements;if(!e)return;const n=document.createDocumentFragment();t.forEach(t=>{const e=document.createElement("div");e.innerHTML=t;const i=e.firstElementChild;i&&(i.classList.add("new-item"),n.appendChild(i))}),e.appendChild(n)},animateNewItems(){const e=t.HolyLabelDOMUtils||t.DOMUtils,n=t.HolyLabelAnimationManager||t.AnimationManager;e.getAll(".product-item.new-item").forEach((t,e)=>{t.style.opacity="0",t.style.transform="translateY(30px)",setTimeout(()=>{t.style.transition="opacity 0.6s ease, transform 0.6s ease",t.style.opacity="1",t.style.transform="translateY(0)",setTimeout(()=>{t.classList.remove("new-item"),t.style.transition=""},600)},100*e)}),n&&n.animateOnScroll&&setTimeout(()=>{n.animateOnScroll()},100)},setLoadingState(t){const{btn:e}=this.elements;e&&(t?(e.disabled=!0,e.textContent="読み込み中...",e.classList.add("loading")):(e.disabled=!1,e.textContent="もっと見る",e.classList.remove("loading")))},showError(e){t.HolyLabelModalUtils?t.HolyLabelModalUtils.alert(e):alert(e)},initInfiniteScroll(){if(!this.isInfiniteScrollEnabled())return;let e=!1;t.addEventListener("scroll",()=>{e||(requestAnimationFrame(()=>{t.scrollY+t.innerHeight>=document.documentElement.scrollHeight-200&&this.loadMore(),e=!1}),e=!0)},{passive:!0})},isInfiniteScrollEnabled:()=>"true"===document.body.dataset.infiniteScroll||document.body.classList.contains("infinite-scroll"),initSearchFilter(){const e=(t.HolyLabelDOMUtils||t.DOMUtils).get(".search-form");e&&e.addEventListener("submit",t=>{this.isAjaxSearchEnabled()&&(t.preventDefault(),this.performAjaxSearch())})},isAjaxSearchEnabled:()=>"true"===document.body.dataset.ajaxSearch,async performAjaxSearch(){console.log("Ajax search functionality would be implemented here")}};t.HolyLabelLoadMoreManager=e,t.LoadMoreManager||(t.LoadMoreManager=e)}(window),
/**
 * HOLY LABEL - Logo Manager Library
 * Logo positioning and navigation state management
 * @version 1.0.0
 * @namespace window.HolyLabelLogoManager
 * @requires window.HolyLabelDOMUtils, window.HolyLabelPageState, window.HolyLabelNavigationManager
 */
function(t){"use strict";const e={updatePosition(){const e=t.HolyLabelDOMUtils||t.DOMUtils,n=t.HolyLabelPageState||t.PageState,i=t.HolyLabelNavigationManager||t.NavigationManager,o=e.logo();if(!o)return;const a=!!i&&i.isActive(),s=!!n&&n.isHomePage();o.classList.remove("center-position","header-position","menu-open-position"),a?o.classList.add("menu-open-position"):s?o.classList.add("center-position"):o.classList.add("header-position")},handleScroll(){const e=t.HolyLabelDOMUtils||t.DOMUtils,n=t.HolyLabelPageState||t.PageState;if(!n||!n.isHomePage())return;const i=e.logo();if(!i)return;const o=t.scrollY,a=e.get(".main-visual");if(a){const t=o>.8*a.offsetHeight;i.classList.toggle("scrolled",t)}},initLogoClick(){const e=(t.HolyLabelDOMUtils||t.DOMUtils).logo();if(!e)return;const n=e.querySelector("a");n&&n.addEventListener("click",e=>{"/"!==t.location.pathname&&"/index.html"!==t.location.pathname||(e.preventDefault(),this.scrollToTop())})},scrollToTop(){t.scrollTo({top:0,behavior:"smooth"})},fadeInOut(show=!0){const e=(t.HolyLabelDOMUtils||t.DOMUtils).logo();e&&(show?(e.style.opacity="1",e.style.transition="opacity 0.3s ease"):(e.style.opacity="0",e.style.transition="opacity 0.3s ease"))},handleResize(){const e=t.innerWidth<=768,n=(t.HolyLabelDOMUtils||t.DOMUtils).logo();n&&(n.classList.toggle("mobile",e),n.classList.toggle("desktop",!e),this.updatePosition())},init(){let e,n;this.updatePosition(),this.initLogoClick(),t.addEventListener("scroll",()=>{e&&clearTimeout(e),e=setTimeout(()=>{this.handleScroll()},10)},{passive:!0}),t.addEventListener("resize",()=>{n&&clearTimeout(n),n=setTimeout(()=>{this.handleResize()},250)}),this.handleResize()},initCategoryDisplay(){const e=(t.HolyLabelDOMUtils||t.DOMUtils).get('a.expand[href="#"]');if("ITEM"===e?.textContent.trim()){const t=e.nextElementSibling;if(t){const e=t.querySelectorAll("li:not(.no-category-message)"),n=t.querySelector(".no-category-message");0===e.length&&n&&(n.style.display="block")}}},controlInstagramButton(){const e=t.HolyLabelDOMUtils||t.DOMUtils,n=t.HolyLabelPageState||t.PageState;e.get(".instagram-fixed-btn")&&e.body().classList.toggle("home-page",!!n&&n.isHomePage())},initAll(){this.init(),this.initCategoryDisplay(),this.controlInstagramButton()}};t.HolyLabelLogoManager=e,t.LogoManager||(t.LogoManager=e),t.initCategoryDisplay=e.initCategoryDisplay.bind(e),t.controlInstagramButton=e.controlInstagramButton.bind(e)}(window),
/**
 * HOLY LABEL - Initialization Manager Library
 * Application initialization and startup management
 * @version 1.0.0
 * @namespace window.HolyLabelInitializationManager
 */
function(t){"use strict";const e={initialized:!1,init(){this.initialized||(this.initializeCore(),this.initializeBasicFeatures(),this.initializeAnimations(),this.initializeFeatures(),this.initializeDOMObserver(),this.initializeScrollAnimations(),this.initializeLanguageSwitcher(),this.initialized=!0)},initializeCore(){const e=t.HolyLabelDOMUtils||t.DOMUtils;e&&e.body&&e.body().classList.add("loaded")},initializeBasicFeatures(){const e=t.HolyLabelNavigationManager||t.NavigationManager,n=t.HolyLabelLogoManager||t.LogoManager;e&&(e.close(),e.init()),n&&(n.updatePosition(),n.initCategoryDisplay&&n.initCategoryDisplay(),n.controlInstagramButton&&n.controlInstagramButton()),t.initCategoryDisplay&&t.initCategoryDisplay(),t.controlInstagramButton&&t.controlInstagramButton()},initializeAnimations(){const e=t.HolyLabelAnimationManager||t.AnimationManager;e&&(e.initRelatedProducts&&e.initRelatedProducts(),e.initHomepageAnimation&&e.initHomepageAnimation())},initializeFeatures(){const e=t.HolyLabelLoadMoreManager||t.LoadMoreManager,n=t.HolyLabelProductGallery||t.ProductImageGallery,i=t.HolyLabelModalUtils;e&&e.init&&e.init(),n&&n.init&&n.init(),i&&i.init&&i.init(),t.initRestockNotificationModal&&t.initRestockNotificationModal()},initializeDOMObserver(){if(!t.MutationObserver)return;const e=t.HolyLabelLogoManager||t.LogoManager;new MutationObserver(t=>{let n=!1;t.forEach(t=>{"childList"===t.type&&(n=!0)}),n&&e&&e.updatePosition&&setTimeout(()=>e.updatePosition(),100)}).observe(document.body,{childList:!0,subtree:!0})},initializeScrollAnimations(){const e=t.HolyLabelAnimationManager||t.AnimationManager;e&&e.animateOnScroll&&setTimeout(()=>e.animateOnScroll(),500)},initializeLanguageSwitcher(){const e=t.HolyLabelLanguageManager;e&&e.init?e.init():setTimeout(()=>{t.initCustomLanguageSwitcher&&t.initCustomLanguageSwitcher()},100)},getStatus(){return{initialized:this.initialized,availableManagers:{dom:!(!t.HolyLabelDOMUtils&&!t.DOMUtils),navigation:!(!t.HolyLabelNavigationManager&&!t.NavigationManager),logo:!(!t.HolyLabelLogoManager&&!t.LogoManager),animation:!(!t.HolyLabelAnimationManager&&!t.AnimationManager),loadMore:!(!t.HolyLabelLoadMoreManager&&!t.LoadMoreManager),gallery:!(!t.HolyLabelProductGallery&&!t.ProductImageGallery),modal:!!t.HolyLabelModalUtils,language:!!t.HolyLabelLanguageManager}}}};t.HolyLabelInitializationManager=e,t.InitializationManager||(t.InitializationManager=e);const n=()=>{e.init()};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",n):setTimeout(n,0)}(window),
/**
 * HOLY LABEL - Language Manager Library
 * Multi-language support and language switching functionality
 * @version 1.0.0
 * @namespace window.HolyLabelLanguageManager
 */
function(t){"use strict";const e={currentLang:"ja",initialized:!1,init(){this.initialized||(setTimeout(()=>{this.hideAllBaseI18nElements(),this.setupLanguageDetection()},1e3),this.initialized=!0)},switchLanguage(e){const n=document.querySelectorAll('select[name*="language"], select[name*="i18n"]');let i=!1;if(n.forEach(t=>{if("none"===t.style.display||!t.offsetParent){t.querySelectorAll("option").forEach(n=>{if("ja"===e&&(n.value.includes("ja")||n.value.includes("JP"))||"en"===e&&(n.value.includes("en")||n.value.includes("EN"))){t.value=n.value;const e=new Event("change",{bubbles:!0});t.dispatchEvent(e),i=!0}})}}),!i){const n=t.location.href;if("en"!==e||n.includes("lang=en"))"ja"===e&&n.includes("lang=en")&&(t.location.href=n.replace(/[?&]lang=en/,""));else{const e=n.includes("?")?"&":"?";t.location.href=n+e+"lang=en"}}this.updateLanguageUIState(e),this.currentLang=e},updateLanguageUIState(t){const e=document.getElementById("lang-ja"),n=document.getElementById("lang-en");e&&n&&(e.classList.toggle("active","ja"===t),n.classList.toggle("active","en"===t))},setupLanguageDetection(){this.currentLang=this.detectCurrentLanguage(),this.updateLanguageUIState(this.currentLang)},detectCurrentLanguage(){if(t.location.href.includes("lang=en"))return"en";const e=document.querySelector('a[href*="privacy"]');return e&&e.textContent.includes("Privacy")?"en":"ja"},hideAllBaseI18nElements(){[".x_i18nSelectBox",'[id*="i18n"]','[class*="i18n"]','[id*="I18n"]','[class*="I18n"]'].forEach(t=>{document.querySelectorAll(t).forEach(t=>{t.closest(".custom-language-switcher")||(t.style.display="none",t.style.visibility="hidden")})})},toggleContentByLanguage(t){document.querySelectorAll("[data-lang]").forEach(e=>{const n=e.dataset.lang;e.style.display=n===t?"":"none"})},initLanguageSwitcherEvents(){const t=document.getElementById("lang-ja"),e=document.getElementById("lang-en");t&&t.addEventListener("click",t=>{t.preventDefault(),this.switchLanguage("ja")}),e&&e.addEventListener("click",t=>{t.preventDefault(),this.switchLanguage("en")})},getCurrentLanguage(){return this.currentLang},loadLanguageResources(t){console.log(`Loading resources for language: ${t}`)}};t.HolyLabelLanguageManager=e,t.LanguageManager||(t.LanguageManager=e),t.switchLanguage=e.switchLanguage.bind(e),t.initCustomLanguageSwitcher=e.init.bind(e)}(window),
/**
 * HOLY LABEL - Scroll Manager Library
 * Optimized scroll event handling and performance management
 * @version 1.0.0
 * @namespace window.HolyLabelScrollManager
 */
function(t){"use strict";const e={scrollTimeout:null,lastScrollY:0,isScrolling:!1,fps:60,frameDelay:1e3/60,init(){this.initScrollListener(),this.initPerformanceOptimization()},initScrollListener(){let e=!1;t.addEventListener("scroll",()=>{e||(requestAnimationFrame(()=>{this.onScroll(),e=!1}),e=!0)},{passive:!0})},onScroll(){const e=t.scrollY,n=e>this.lastScrollY?"down":"up";this.handleScrollAnimations(),this.handleLogoPosition(),this.dispatchCustomScrollEvent(n,e),this.lastScrollY=e},handleScrollAnimations(){const e=t.HolyLabelAnimationManager||t.AnimationManager;e&&e.animateOnScroll&&e.animateOnScroll()},handleLogoPosition(){const e=t.HolyLabelLogoManager||t.LogoManager;e&&e.handleScroll&&e.handleScroll()},debounceScroll(t,e=this.frameDelay){this.scrollTimeout&&clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(()=>{t(),this.scrollTimeout=null},e)},throttleScroll(t,e=this.frameDelay){this.isScrolling||(this.isScrolling=!0,setTimeout(()=>{t(),this.isScrolling=!1},e))},dispatchCustomScrollEvent(t,e){const n=new CustomEvent("holyLabelScroll",{detail:{direction:t,scrollY:e,scrollProgress:this.getScrollProgress()}});document.dispatchEvent(n)},getScrollProgress(){const e=t.scrollY,n=document.documentElement.scrollHeight-t.innerHeight;return n>0?Math.min(e/n,1):0},initPerformanceOptimization(){this.setupVisibilityObserver(),this.optimizeScrollListeners()},setupVisibilityObserver(){if(!t.IntersectionObserver)return;const e=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting?t.target.classList.add("in-viewport"):t.target.classList.remove("in-viewport")})},{threshold:[0,.25,.5,.75,1],rootMargin:"50px"});document.querySelectorAll(".product-item, .hero-image, .main-visual, section").forEach(t=>e.observe(t))},optimizeScrollListeners(){const e=EventTarget.prototype.addEventListener;EventTarget.prototype.addEventListener=function(n,i,o){if("scroll"===n&&this===t){const t="object"==typeof o?{...o,passive:!0}:{passive:!0};return e.call(this,n,i,t)}return e.call(this,n,i,o)}},smoothScrollTo(e,n=1e3){const i="string"==typeof e?document.querySelector(e):e;if(!i)return;const o=t.scrollY,a=i.offsetTop-o;let s=null;const l=e=>{null===s&&(s=e);const i=e-s,r=Math.min(i/n,1),c=1-Math.pow(1-r,3);t.scrollTo(0,o+a*c),r<1&&requestAnimationFrame(l)};requestAnimationFrame(l)},getScrollInfo(){return{scrollY:t.scrollY,scrollX:t.scrollX,progress:this.getScrollProgress(),direction:this.lastScrollY<t.scrollY?"down":"up",isAtTop:0===t.scrollY,isAtBottom:t.scrollY+t.innerHeight>=document.documentElement.scrollHeight}}};t.HolyLabelScrollManager=e,t.ScrollManager||(t.ScrollManager=e),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>e.init()):e.init()}(window);